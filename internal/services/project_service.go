package services

import (
	"pentest-report/internal/models"
	"pentest-report/internal/repositories"

)

type ProjectService struct {
	ProjectRepository *repositories.ProjectRepository
}

func NewProjectService(projectRepo *repositories.ProjectRepository) *ProjectService {
	return &ProjectService{ProjectRepository: projectRepo}
}

// AddProject adds a new project
func (s *ProjectService) AddProject(project *models.Project) error {
	// Implement logic to add project
	return s.ProjectRepository.AddProject(project)
}

// CheckProjectExist kiểm tra xem tên project đã tồn tại hay chưa
func (s *ProjectService) CheckProjectExist(name string) (bool, error) {
    return s.ProjectRepository.CheckProjectExist(name)
}

// GetAllProjectsWithTotalReports trả về danh sách tất cả các projects kèm theo tổng số báo cáo của mỗi project
func (s *ProjectService) GetAllProjectsWithTotalReports() ([]models.ProjectWithTotalReports, error) {
	return s.ProjectRepository.GetAllProjectsWithTotalReports()
}

func (s *ProjectService) GetProjectDetailByID(projectID int) (*models.ProjectDetail, error) {
	return s.ProjectRepository.GetProjectDetailByID(projectID)
}

func (s *ProjectService) DeleteProject(projectID int) error {
    return s.ProjectRepository.DeleteProject(projectID)
}

func (s *ProjectService) UpdateProject(projectID int, project *models.ProjectUpdate) error {
    return s.ProjectRepository.UpdateProject(projectID, project)
}