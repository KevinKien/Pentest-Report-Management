function addproject(btn) {
    projectname = document.getElementById('projectname').value;
    description = document.getElementById('description').value;
    fetch("/api/v1/project", {
      method: "POST",
      mode: 'cors',
      body: JSON.stringify({
        "name": projectname,
        "description": description
      }),
      headers: {
        "Content-type": "application/json",
        "Authorization": "Bearer " + localStorage.getItem("token")
      }
    }).then(async (response) => {
      // get json response here
      let data = await response.json();
      if (response.status == 201) {
        window.location.reload(true);
      } 

      if (response.status == 401) {
        window.location.replace("/login");
      }
    });
}

async function project_table() {
    fetch("/api/v1/projects", {
    method: "GET",
    mode: 'cors',
    headers: {
        "Content-type": "application/json",
        "Authorization": "Bearer " + localStorage.getItem("token")
    }
    }).then(async (response) => {
        // get json response here
        let data = await response.json();
        if (response.status == 200) {
            for (let r of data) {
              document.getElementById("projectall").innerHTML += `
              <div class="col-md-6 col-xl-4">
                <a href="/project/` + r['ID'] + `" class="card border-hover-primary">
                  <div class="card-body p-9">
                    <div class="fs-3 fw-bold text-gray-900">` + r['Name'] + `</div>
                    <p class="text-gray-500 fw-semibold fs-5 mt-1 mb-7">` + r['Description'] + `</p>
                    <div class="d-flex flex-wrap mb-5">
                      <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 me-7 mb-3">
                        <div class="fs-6 text-gray-800 fw-bold">`+  r['CreatedAt'] +`</div>
                        <div class="fw-semibold text-gray-500">Due Date</div>
                      </div>
                      <div class="border border-gray-300 border-dashed rounded min-w-125px py-3 px-4 mb-3">
                        <div class="fs-6 text-gray-800 fw-bold">` + r['TotalReports'] + `</div>
                        <div class="fw-semibold text-gray-500">Reports</div>
                      </div>
                    </div>
                  </div>
                </a>
              </div>
              `;
            }
        } else {
            window.location.replace("/login");
        }
    });
};
    
project_table();